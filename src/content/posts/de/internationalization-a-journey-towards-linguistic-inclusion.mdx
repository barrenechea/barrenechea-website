---
title: "Internationalisierung: Eine Reise zur sprachlichen Inklusion"
description: Meine Website macht den Sprung zur Internationalisierung und beseitigt sprachliche Barrieren, um ein vielfältiges Publikum zu umarmen.
pubDate: 2023-12-27T12:00:00Z
img: ~/assets/images/post-i18n.jpg
imgAlt: "Bild erstellt von Firefly Image 2 mit dem Text: award winning art, a branched tree made of light rays and energy, dramatic, impactful, colorful, high definition, 4k uhd"
translatedBy: gpt-4-1106-preview
checksum: fa5801f11cb3dac21895569d7b6bb87b1866af96243b77264fe43a2f42c5c008
---

import OldNavbar from "~/assets/images/post-i18n-old-navbar.png";
import NewNavbar from "~/assets/images/post-i18n-new-navbar.png";
import WrongEsTranslation from "~/assets/images/post-i18n-wrong-es-translation.png";
import { Image } from "astro:assets";

Seit dem Beginn dieser Seite habe ich mich dafür entschieden, Englisch als Hauptsprache zu verwenden, in der Annahme, dass es die am weitesten verbreitete Sprache im Internet ist. Kürzlich jedoch hörte ich, dass unter den Netzwerken von Meta und X Spanisch die zweithäufigste verwendete Sprache ist. Persönlich hatte ich eine ausstehende Schuld, meine Inhalte in meiner Muttersprache zu präsentieren, und heute ist das Realität geworden.

In den letzten Tagen habe ich jede Ecke der Website internationalisiert, indem ich Schlüssel/Wert-Paare für die Benutzeroberfläche zugewiesen und den Inhalt von Projekten und Veröffentlichungen automatisiert mit LLMs (Large Language Models) übersetzt habe.

## Wo fange ich an, amigo?

Es gibt zwei Hauptaspekte zu berücksichtigen: die Benutzeroberfläche und den Inhalt.

Die [Dokumentation](https://docs.astro.build/de/recipes/i18n/) von Astro und ihr [Quellcode](https://github.com/withastro/docs/tree/main/src/i18n) waren sehr hilfreich für die Grundlogik, aber ich habe mehrere Anpassungen vorgenommen, um sie an meine Bedürfnisse anzupassen und den Code so sauber wie möglich zu halten.

Diese Website konzentriert sich hauptsächlich auf den Inhalt der Veröffentlichungen und ist in Bezug auf die Benutzeroberfläche ziemlich einfach. Der größte Teil des statischen Textes befand sich auf der Startseite, also begann ich, jeden Wert in Schlüssel/Wert-Objekte zu extrahieren, damit die Ansicht auf die gleiche Weise gerendert werden konnte.

```typescript
export const en = {
  "author.name": "Sebastian Barrenechea",

  "nav.fork": "Fork me on GitHub",
  "nav.sr.open": "Open navigation menu",
  "nav.home": "Home",
  "nav.projects": "Projects",
  "nav.posts": "Posts",
  "nav.page": "Page",
  "nav.language.select": "Select language",

  "hero.greeting": "Heey! I'm",
  // ...
};
```

Die Handhabung von Routen ist entscheidend, um die zu erstellenden Seiten zu identifizieren. Astro erleichtert dies mit seinem Routenverwaltungssystem, das die Sprache als Parameter verfügbar macht:

- Verschieben Sie alle Seiten im Verzeichnis `src/pages` in ein Verzeichnis `src/pages/[lang]`
- Fügen Sie so etwas wie das Folgende auf jeder Seite hinzu, die i18n-Handling benötigt:
  ```typescript
  const { lang } = Astro.params;
  ```

Mit der englischen Version funktionierend, begann ich, Unterstützung für Spanisch hinzuzufügen. Hier stieß ich auf ein Übersetzungsproblem:

<Image
  src={WrongEsTranslation}
  alt="Screenshot der Startseite mit den spanischen Texten 'Últimos Publicaciones' und 'Ver todos los publicaciones', die falsch übersetzt wurden"
  format="webp"
/>

Auf Englisch konnte ich dieselben Werte sowohl für Projekte als auch für Veröffentlichungen verwenden, aber auf Spanisch nicht.

In einer idealen Welt würde ich geschlechtsneutrale Sprache verwenden. Ich hätte mich für "Reciente Proyectos" und "Reciente Publicaciones" entscheiden können, was es mir erlaubt hätte, das Wort zu recyceln. Um jedoch die visuelle Kohärenz der Seite zu wahren, musste der Satz mit "Proyectos" oder "Publicaciones" enden. Nach einigen Anpassungen gelang es mir, es in allen Ansichten vollständig übersetzt zu bekommen (das Verzeichnis, die Navigationsseiten und die Vorlagen, die den Inhalt verwenden).

Und es gab ein Problem mit der Sprachauswahlkomponente, die ich verwendet hatte, das mich sehr störte. Die Komponente erforderte die Klasse `absolute`, um Objekte darunter zu positionieren, was dazu führte, dass sie den Seitenrand nicht mehr respektierte, wenn sie einen sehr langen Text hatte:

<div align="center">
  <Image
    src={OldNavbar}
    alt="Screenshot der alten Navigationsleiste mit dem Sprachauswähler in der oberen rechten Ecke, der über den Rand hinausgeht"
    format="webp"
  />
  <p class="italic">Rand in Rot markiert, um das Problem hervorzuheben</p>
</div>

Ich habe diese Komponente von [Starlight](https://starlight.astro.build/de/) extrahiert, weil sie mir einfach und minimalistisch erschien, aber am Ende habe ich sie durch eine von [Flowbite](https://flowbite.com/docs/components/navbar/#language-dropdown) ersetzt und die Interaktivität mit der [Web Components](https://web.dev/articles/custom-elements-v1) API neu implementiert. Die neue Komponente erfordert ein zusätzliches Grafikelement für jede Sprache (die Flagge, die [@iconify-icons/circle-flags](https://icon-sets.iconify.design/circle-flags/)) verwendet), aber es lohnt sich.

<Image
  src={NewNavbar}
  alt="Screenshot der aktuellen Navigationsleiste mit dem Sprachauswähler in der oberen rechten Ecke"
  format="webp"
/>

## Aber man sieht doch keinen Inhalt, oder?

Als ich den Inhalt der Website (Projekte und Veröffentlichungen) auf den entsprechenden englischen Pfad anpasste, konnte die Website den spanischen Inhalt nicht finden, was zu einer Seite ohne navigierbaren Inhalt führte. Die ersten Tests machte ich mit manuellen Übersetzungen mit der OpenAI-API, und dann automatisierte ich den Prozess, um die Dinge zu erleichtern.

_Sie können mehr Details in einem kommenden Beitrag über die Verwendung von LLMs in der Produktion sehen._

Nachdem ich die Übersetzung von Projekten und Veröffentlichungen ins Spanische abgeschlossen hatte, machte ich einige Anpassungen an den resultierenden Übersetzungen. Ich habe Spanisch als Referenzstandard für den automatisierten Übersetzungsprozess festgelegt und nach den notwendigen Anpassungen den Inhalt auf Englisch neu generiert.

## Und was jetzt?

Jetzt ist es überraschend einfach, Unterstützung für weitere Sprachen hinzuzufügen! Es gibt bestimmte Überlegungen zu berücksichtigen, wie zum Beispiel die "Annahme", dass die Sprache von links nach rechts gelesen wird, was Sprachen wie Arabisch oder Hebräisch ausschließt. Tailwind, das CSS-Framework, das ich auf dieser Website verwende, unterstützt nativ LTR (left to right) und RTL (right to left), aber einige Details müssen angepasst werden (zum Beispiel die Klasse `rtl:space-x-reverse` verwenden, wo nötig).

Ich habe ohne Schwierigkeiten Unterstützung für die deutsche Sprache integriert und habe kurzfristige Pläne, Italienisch, Französisch, traditionelles Chinesisch und Isländisch (I♥️Iceland) hinzuzufügen. Obwohl die Automatisierung den Prozess erleichtert, ist es unerlässlich, die Übersetzungen zu überprüfen, um ihre Qualität sicherzustellen, da sie nicht immer perfekt sind. Im Falle des Englischen konnte ich eine persönliche Überprüfung durchführen; für Sprachen wie Deutsch, die ich nicht beherrsche, habe ich jedoch auf Hilfsmittel wie die automatische Übersetzung von Google Chrome zurückgegriffen, um die Konsistenz zu überprüfen. Mein Ziel ist es, schließlich mit Muttersprachlern für jede Sprache zusammenzuarbeiten, um den Standard der angebotenen Übersetzungen zu erhöhen.
