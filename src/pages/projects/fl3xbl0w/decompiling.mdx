import BaseProject from "@/templates/BaseProject.astro";
import ProjectImage from "@/assets/images/project-fl3xbl0w.svg";

export const title = "Decompiling - fl3xbl0w";
export const description =
  "Reverse engineering project. Started on Bowflex Treadmill 22 but ended up generalized to any Android powered machine sold by Nautilus Inc. (Nautilus, Bowflex, Schwinn).";
export const pubDate = new Date("2022-05-28T10:28:00Z");
export const link = "/projects/fl3xbl0w";
export const imgSrc = ProjectImage;
export const imgAlt = "Logo of the flexblow project";
export const tags = ["ReverseEngineering", "Uart", "Android"];

export default function Layout({ children }) {
  return <BaseProject title={title} description={description} imgSrc={imgSrc} imgAlt={imgAlt} pubDate={pubDate} link={link}>{children}</BaseProject>;
}

This assumes you already [have your own APKs](/projects/fl3xbl0w/backup). Note that even though I'm specifying this on Nautilus' apps, this applies to pretty much any Android application you'd like to "peek under the hood".


## Turning apps into Java code

The following instructions are intended to get some "readable code", but it's improbable that you'll be able to compile them back to an APK. I'm using this as a reference to understand Nautilus' developers. If you want to alter the codebase and package it back, go to [Turning apps into Smali code](#turning-apps-into-smali-code).

### Requirements
- [jadx](https://github.com/skylot/jadx)


### Let's open some sh*t

After installing `jadx` you should be able to open `jadx-gui`. Go to File -> Open files ...
![jadx-gui screen](/assets/images/fl3xbl0w/screen-jadx-init.png) 

Search for your desired APK and click on "Open file":
![jadx-gui selecting apk](/assets/images/fl3xbl0w/screen-jadx-open.png) 

And from there, you can start poking around:
![jadx-gui decompiling NautilusLauncher](/assets/images/fl3xbl0w/screen-jadx-opened.png "onStartCommand blah blah?") 

If you want to save the project as Java files, go into File -> Save as gradle project:
![jadx-gui saving project](/assets/images/fl3xbl0w/screen-jadx-save.png) 

If useful, here are my `jadx-gui` preferences:
![jadx-gui preferences](/assets/images/fl3xbl0w/screen-jadx-preferences.png) 


## Turning apps into Smali code

The community has tested this to apply some patches to our APKs. It would only work for non-system apps, as without the proper signing key, the app will not have access to system resources (such as the Serial port).

https://www.reddit.com/r/Bowflex/comments/mi8wdo/unlocking_bowflex_velocore/
